2023/07/22 01:27:48 [INFO] Packer version: 1.6.6 [go1.19.8 linux arm64]
2023/07/22 01:27:48 Checking 'PACKER_CONFIG' for a config file path
2023/07/22 01:27:48 'PACKER_CONFIG' not set; checking the default config file path
2023/07/22 01:27:48 Attempting to open config file: /root/.packerconfig
2023/07/22 01:27:48 [WARN] Config file doesn't exist: /root/.packerconfig
2023/07/22 01:27:48 Setting cache directory: /root/repo/devops/packer/packer_cache
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 Creating plugin client for path: /usr/bin/packer
2023/07/22 01:27:48 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-builder-amazon-ebs"}
2023/07/22 01:27:48 Waiting for RPC address for: /usr/bin/packer
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: [INFO] Packer version: 1.6.6 [go1.19.8 linux arm64]
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Checking 'PACKER_CONFIG' for a config file path
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: 'PACKER_CONFIG' not set; checking the default config file path
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Attempting to open config file: /root/.packerconfig
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: [WARN] Config file doesn't exist: /root/.packerconfig
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Setting cache directory: /root/repo/devops/packer/packer_cache
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: args: []string{"packer-builder-amazon-ebs"}
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Plugin address: unix /tmp/packer-plugin4294451976
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Waiting for connection...
2023/07/22 01:27:48 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin4294451976
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Serving a plugin connection...
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: [INFO] (aws): No AWS timeout and polling overrides have been set. Packer will default to waiter-specific delays and timeouts. If you would like to customize the length of time between retries and max number of retries you may do so by setting the environment variables AWS_POLL_DELAY_SECONDS and AWS_MAX_ATTEMPTS or the configuration options aws_polling_delay_seconds and aws_polling_max_attempts to your desired values.
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 Creating plugin client for path: /usr/bin/packer
2023/07/22 01:27:48 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-shell"}
2023/07/22 01:27:48 Waiting for RPC address for: /usr/bin/packer
2023/07/22 01:27:48 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.19.8 linux arm64]
2023/07/22 01:27:48 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2023/07/22 01:27:48 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2023/07/22 01:27:48 packer-provisioner-shell plugin: Attempting to open config file: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-shell plugin: Setting cache directory: /root/repo/devops/packer/packer_cache
2023/07/22 01:27:48 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2023/07/22 01:27:48 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin1413391865
2023/07/22 01:27:48 packer-provisioner-shell plugin: Waiting for connection...
2023/07/22 01:27:48 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin1413391865
2023/07/22 01:27:48 packer-provisioner-shell plugin: Serving a plugin connection...
2023/07/22 01:27:48 Creating plugin client for path: /usr/bin/packer
2023/07/22 01:27:48 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-shell"}
2023/07/22 01:27:48 Waiting for RPC address for: /usr/bin/packer
2023/07/22 01:27:48 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.19.8 linux arm64]
2023/07/22 01:27:48 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2023/07/22 01:27:48 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2023/07/22 01:27:48 packer-provisioner-shell plugin: Attempting to open config file: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-shell plugin: Setting cache directory: /root/repo/devops/packer/packer_cache
2023/07/22 01:27:48 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2023/07/22 01:27:48 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin2531569213
2023/07/22 01:27:48 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin2531569213
2023/07/22 01:27:48 packer-provisioner-shell plugin: Waiting for connection...
2023/07/22 01:27:48 packer-provisioner-shell plugin: Serving a plugin connection...
2023/07/22 01:27:48 Creating plugin client for path: /usr/bin/packer
2023/07/22 01:27:48 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-file"}
2023/07/22 01:27:48 Waiting for RPC address for: /usr/bin/packer
2023/07/22 01:27:48 packer-provisioner-file plugin: [INFO] Packer version: 1.6.6 [go1.19.8 linux arm64]
2023/07/22 01:27:48 packer-provisioner-file plugin: Checking 'PACKER_CONFIG' for a config file path
2023/07/22 01:27:48 packer-provisioner-file plugin: 'PACKER_CONFIG' not set; checking the default config file path
2023/07/22 01:27:48 packer-provisioner-file plugin: Attempting to open config file: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-file plugin: [WARN] Config file doesn't exist: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-file plugin: Setting cache directory: /root/repo/devops/packer/packer_cache
2023/07/22 01:27:48 packer-provisioner-file plugin: args: []string{"packer-provisioner-file"}
2023/07/22 01:27:48 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin764233030
2023/07/22 01:27:48 packer-provisioner-file plugin: Plugin address: unix /tmp/packer-plugin764233030
2023/07/22 01:27:48 packer-provisioner-file plugin: Waiting for connection...
2023/07/22 01:27:48 packer-provisioner-file plugin: Serving a plugin connection...
2023/07/22 01:27:48 Creating plugin client for path: /usr/bin/packer
2023/07/22 01:27:48 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-shell"}
2023/07/22 01:27:48 Waiting for RPC address for: /usr/bin/packer
2023/07/22 01:27:48 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.19.8 linux arm64]
2023/07/22 01:27:48 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2023/07/22 01:27:48 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2023/07/22 01:27:48 packer-provisioner-shell plugin: Attempting to open config file: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /root/.packerconfig
2023/07/22 01:27:48 packer-provisioner-shell plugin: Setting cache directory: /root/repo/devops/packer/packer_cache
2023/07/22 01:27:48 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2023/07/22 01:27:48 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin3683287374
2023/07/22 01:27:48 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin3683287374
2023/07/22 01:27:48 packer-provisioner-shell plugin: Waiting for connection...
2023/07/22 01:27:48 packer-provisioner-shell plugin: Serving a plugin connection...
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_access_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for aws_secret_key, so skipping
2023/07/22 01:27:48 [TRACE] validateValue: not active for timestamp, so skipping
2023/07/22 01:27:48 ui: [1;32mamazon-ebs.autogenerated_1: output will be in this color.[0m
2023/07/22 01:27:48 ui: 
2023/07/22 01:27:48 Build debug mode: false
2023/07/22 01:27:48 Force build: false
2023/07/22 01:27:48 On error: 
2023/07/22 01:27:48 Waiting on builds to complete...
2023/07/22 01:27:48 Starting build run: amazon-ebs.autogenerated_1
2023/07/22 01:27:48 Running builder: 
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: Found region us-east-1
2023/07/22 01:27:48 packer-builder-amazon-ebs plugin: [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2023/07/22 01:27:48 ui: [1;32m==> amazon-ebs.autogenerated_1: Prevalidating any provided VPC information[0m
2023/07/22 01:27:48 ui: [1;32m==> amazon-ebs.autogenerated_1: Prevalidating AMI Name: ubuntu-nodejs-18-20230722012748[0m
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin: Using AMI Filters {
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:   Filters: [{
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:       Name: "root-device-type",
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:       Values: ["ebs"]
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:     },{
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:       Name: "virtualization-type",
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:       Values: ["hvm"]
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:     },{
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:       Name: "name",
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:       Values: ["ubuntu/images/*ubuntu-focal-20.04-amd64-server-*"]
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:     }],
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin:   Owners: ["099720109477"]
2023/07/22 01:27:49 packer-builder-amazon-ebs plugin: }
2023/07/22 01:27:49 ui: [0;32m    amazon-ebs.autogenerated_1: Found Image ID: ami-05bfc1ab11bfbf484[0m
2023/07/22 01:27:49 ui: [1;32m==> amazon-ebs.autogenerated_1: Creating temporary keypair: packer_64bb3094-7b81-88de-8d47-68bfa018739e[0m
2023/07/22 01:27:50 ui: [1;32m==> amazon-ebs.autogenerated_1: Creating temporary security group for this instance: packer_64bb3096-7394-832d-6d2c-d0be7e465b51[0m
2023/07/22 01:27:50 packer-builder-amazon-ebs plugin: [DEBUG] Waiting for temporary security group: sg-0e9a7c665c6086d4e
2023/07/22 01:27:51 ui: [1;32m==> amazon-ebs.autogenerated_1: Authorizing access to port 22 from [0.0.0.0/0] in the temporary security groups...[0m
2023/07/22 01:27:51 packer-builder-amazon-ebs plugin: [DEBUG] Found security group sg-0e9a7c665c6086d4e
2023/07/22 01:27:51 ui: [1;32m==> amazon-ebs.autogenerated_1: Launching a source AWS instance...[0m
2023/07/22 01:27:51 ui: [1;32m==> amazon-ebs.autogenerated_1: Adding tags to source instance[0m
2023/07/22 01:27:51 ui: [0;32m    amazon-ebs.autogenerated_1: Adding tag: "Name": "Packer Builder"[0m
2023/07/22 01:27:54 ui: [0;32m    amazon-ebs.autogenerated_1: Instance ID: i-0b44f133ad126c996[0m
2023/07/22 01:27:54 ui: [1;32m==> amazon-ebs.autogenerated_1: Waiting for instance (i-0b44f133ad126c996) to become ready...[0m
2023/07/22 01:27:57 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2023/07/22 01:27:57 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2023/07/22 01:27:57 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 1). Ignoring.
2023/07/22 01:27:57 packer-provisioner-file plugin: Received interrupt signal (count: 1). Ignoring.
2023/07/22 01:27:57 ui error: Cancelling build after receiving interrupt
2023/07/22 01:27:57 Cancelling builder after context cancellation context canceled
2023/07/22 01:27:57 ui error: [1;31m==> amazon-ebs.autogenerated_1: Error waiting for instance (i-0b44f133ad126c996) to become ready: RequestCanceled: waiter context canceled
==> amazon-ebs.autogenerated_1: caused by: context canceled[0m
2023/07/22 01:27:57 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2023/07/22 01:27:57 ui: [1;32m==> amazon-ebs.autogenerated_1: No volumes to clean up, skipping[0m
2023/07/22 01:27:57 ui: [1;32m==> amazon-ebs.autogenerated_1: Deleting temporary security group...[0m
2023/07/22 01:27:57 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0e9a7c665c6086d4e has a dependent object
2023/07/22 01:27:57 packer-builder-amazon-ebs plugin: 	status code: 400, request id: 1f5ef697-b89a-460f-8ff9-44605fd8fecb
2023/07/22 01:28:03 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0e9a7c665c6086d4e has a dependent object
2023/07/22 01:28:03 packer-builder-amazon-ebs plugin: 	status code: 400, request id: 7753aa2a-7086-42fd-bdc2-a1c5a155f86f
2023/07/22 01:28:08 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0e9a7c665c6086d4e has a dependent object
2023/07/22 01:28:08 packer-builder-amazon-ebs plugin: 	status code: 400, request id: 041f14f9-1787-47a8-badb-215f4f5e1c57
2023/07/22 01:28:14 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0e9a7c665c6086d4e has a dependent object
2023/07/22 01:28:14 packer-builder-amazon-ebs plugin: 	status code: 400, request id: bbcb0be8-cd45-4719-8a7e-8c355a3bdfb2
2023/07/22 01:28:19 packer-builder-amazon-ebs plugin: Error deleting security group: DependencyViolation: resource sg-0e9a7c665c6086d4e has a dependent object
2023/07/22 01:28:19 packer-builder-amazon-ebs plugin: 	status code: 400, request id: 1df545a1-506c-46b4-be46-5cd5ff21a192
2023/07/22 01:28:24 ui error: [1;31m==> amazon-ebs.autogenerated_1: Error cleaning up security group. Please delete the group manually: err: DependencyViolation: resource sg-0e9a7c665c6086d4e has a dependent object
==> amazon-ebs.autogenerated_1: 	status code: 400, request id: 1df545a1-506c-46b4-be46-5cd5ff21a192; security group ID: sg-0e9a7c665c6086d4e[0m
2023/07/22 01:28:24 ui: [1;32m==> amazon-ebs.autogenerated_1: Deleting temporary keypair...[0m
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: panic: runtime error: invalid memory address or nil pointer dereference
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x171df6c]
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: goroutine 37 [running]:
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/builder/amazon/common.(*StepRunSourceInstance).Run(0x4000540f20, {0x40c7518, 0x40006450c0}, {0x40c7908, 0x40002093b0})
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	github.com/hashicorp/packer/builder/amazon/common/step_run_source_instance.go:254 +0x166c
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/packer-plugin-sdk/multistep.(*BasicRunner).Run(0x40002094a0, {0x40c7518, 0x40006450c0}, {0x40c7908, 0x40002093b0})
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	github.com/hashicorp/packer/packer-plugin-sdk/multistep/basic_runner.go:70 +0x2bc
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/builder/amazon/ebs.(*Builder).Run(0x40000e6900, {0x40c7518, 0x40006450c0}, {0x40ccce8?, 0x4000208d50}, {0x40a1a20?, 0x4000093040})
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	github.com/hashicorp/packer/builder/amazon/ebs/builder.go:354 +0x1d98
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/packer-plugin-sdk/rpc.(*BuilderServer).Run(0x4000396180, 0x489b98?, 0x4000168050)
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	github.com/hashicorp/packer/packer-plugin-sdk/rpc/builder.go:117 +0x1e0
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: reflect.Value.call({0x4000400780?, 0x40004060e8?, 0x13?}, {0x3a1e57a, 0x4}, {0x4000082ef8, 0x3, 0x3?})
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	reflect/value.go:584 +0x688
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: reflect.Value.Call({0x4000400780?, 0x40004060e8?, 0x1000040004db6c8?}, {0x40004db6f8?, 0x4000624d20?, 0x400005f1f8?})
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	reflect/value.go:368 +0x90
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: net/rpc.(*service).call(0x40003961c0, 0x8?, 0x0?, 0x4000440390, 0x40000ac500, 0x400005f1f8?, {0x2dcfac0?, 0x400016804c?, 0x400005f1a0?}, {0x2d0e080?, ...}, ...)
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	net/rpc/server.go:382 +0x20c
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: created by net/rpc.(*Server).ServeCodec
2023/07/22 01:28:25 packer-builder-amazon-ebs plugin: 	net/rpc/server.go:479 +0x344
2023/07/22 01:28:25 ui error: [1;31mBuild 'amazon-ebs.autogenerated_1' errored after 36 seconds 811 milliseconds: unexpected EOF[0m
2023/07/22 01:28:25 ui: 
==> Wait completed after 36 seconds 812 milliseconds
2023/07/22 01:28:25 ui: Cleanly cancelled builds after being interrupted.
2023/07/22 01:28:25 waiting for all plugin processes to complete...
2023/07/22 01:28:25 /usr/bin/packer: plugin process exited
2023/07/22 01:28:25 /usr/bin/packer: plugin process exited
2023/07/22 01:28:25 /usr/bin/packer: plugin process exited
2023/07/22 01:28:25 /usr/bin/packer: plugin process exited
2023/07/22 01:28:25 /usr/bin/packer: plugin process exited
